{"version":3,"sources":["formatters.js","AddSymbolForm.js","PortfolioActions.js","PortfolioNav.js","PortfolioContainer.js","Overview.js"],"names":["bigNumberFormatter","window","Intl","NumberFormat","undefined","maximumFractionDigits","POWER_SUFFIXES","abbreviatedNumberFormatter","format","num","fixed","b","toPrecision","split","k","length","Math","floor","min","parseInt","slice","c","abs","toFixed","pow","currencyFormatter","minimumFractionDigits","numberFormatter","percentFormatter","style","AddSymbolForm","props","React","showTransactionData","setShowTransactionData","formEl","className","action","method","onSubmit","event","preventDefault","formData","formSerialize","currentTarget","hash","onAddSymbol","current","reset","innerRef","for","autoComplete","bsSize","id","name","required","color","onClick","size","type","isOpen","disabled","step","marginBottom","isLoading","PortfolioActions","accept","hidden","onChange","files","onImportPortfolio","value","onDeletePortfolio","onDownloadPortfolio","PortfolioNav","role","exact","to","Portfolio","children","deleteDisabled","onDelete","dispatch","useDispatch","useSelector","state","isFetchingCount","fluid","outline","confirm","deletePortfolio","downloadPortfolio","file","importTransactionsFile","md","data","transaction","cashValue","commission","parseFloat","date","notes","price","shares","symbol","toUpperCase","addTransaction","fetchAllQuotes","SelectReactTable","selectTableHOC","ReactTable","classes","cell","cx","TABLE_COLUMNS","accessor","Cell","Footer","Header","headerClassName","original","change","changePercent","totalDaysGain","reduce","total","daysGain","Overview","handleDeleteSelectedSymbols","deleteSymbols","Array","from","selectedSymbols","handlePageSizeChange","nextPageSize","changePageSize","handleToggleAllSymbols","isSelected","isAllSymbolsSelected","setState","Set","symbols","handleToggleSymbolSelected","normalizedSymbol","replace","isSymbolSelected","delete","add","forceUpdate","has","nextProps","prevState","hasChanges","nextSymbols","nextSelectedSymbols","tableData","this","map","quote","quotes","totalShares","transactions","filter","prev","curr","companyName","high","latestPrice","latestVolume","low","marketCap","open","columns","defaultSorted","desc","getPaginationProps","NextComponent","PreviousComponent","showPageJump","keyField","noDataText","onPageSizeChange","pageSize","appSettings","selectAll","selectType","toggleAll","toggleSelection","connect"],"mappings":"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","file":"static/js/5.a2e41a92.chunk.js","sourcesContent":["/* @flow */\r\n\r\nconst bigNumberFormatter = new window.Intl.NumberFormat(undefined, { maximumFractionDigits: 2 });\r\nconst POWER_SUFFIXES = [\"\", \"K\", \"M\", \"B\", \"T\"];\r\nexport const abbreviatedNumberFormatter = {\r\n  format(num: number, fixed?: number): string {\r\n    if (num === null || num === 0) return \"0\"; // terminate early\r\n\r\n    fixed = !fixed || fixed < 0 ? 0 : fixed; // number of decimal places to show\r\n    const b = num.toPrecision(2).split(\"e\"); // get power\r\n    const k = b.length === 1 ? 0 : Math.floor(Math.min(parseInt(b[1].slice(1), 10), 14) / 3); // floor at decimals, ceiling at trillions\r\n    const d = k < 0 ? k : Math.abs(k); // enforce -0 is 0\r\n    const c = d < 1 ? num.toFixed(0 + fixed) : (num / Math.pow(10, k * 3)).toFixed(1 + fixed); // divide by power\r\n    return `${bigNumberFormatter.format(c)}${POWER_SUFFIXES[k]}`; // append power\r\n  },\r\n};\r\n\r\n// Don't use style `currency` because it always prints a currency symbol. Match Google Finance\r\n// exactly (until supporting other currencies) and don't print the symbol.\r\nexport const currencyFormatter: Intl$NumberFormat = new window.Intl.NumberFormat(undefined, {\r\n  maximumFractionDigits: 2,\r\n  minimumFractionDigits: 2,\r\n});\r\n\r\nexport const numberFormatter: Intl$NumberFormat = new window.Intl.NumberFormat(undefined, {\r\n  maximumFractionDigits: 3,\r\n  minimumFractionDigits: 3,\r\n});\r\n\r\nexport const percentFormatter: Intl$NumberFormat = new window.Intl.NumberFormat(undefined, {\r\n  maximumFractionDigits: 2,\r\n  minimumFractionDigits: 2,\r\n  style: \"percent\",\r\n});\r\n","/* @flow */\r\n\r\nimport * as React from \"react\";\r\nimport { Button, Collapse, Form, FormGroup, Input, Label } from \"reactstrap\";\r\nimport formSerialize from \"form-serialize\";\r\n\r\ntype Props = {\r\n  isLoading: boolean,\r\n  onAddSymbol?: (formData: Object) => void,\r\n};\r\n\r\nexport default function AddSymbolForm(props: Props): React.Node {\r\n  const [showTransactionData, setShowTransactionData] = React.useState(false);\r\n  const formEl = React.useRef(null);\r\n\r\n  function handleSubmit(event: SyntheticEvent<HTMLFormElement>) {\r\n    event.preventDefault();\r\n    const formData = formSerialize(event.currentTarget, { hash: true });\r\n    if (props.onAddSymbol) props.onAddSymbol(formData);\r\n    if (formEl.current != null) formEl.current.reset();\r\n  }\r\n\r\n  return (\r\n    <div className=\"card\">\r\n      <div className=\"card-body\">\r\n        <Form action=\"/api\" method=\"post\" onSubmit={handleSubmit} innerRef={formEl}>\r\n          <FormGroup>\r\n            <Label for=\"symbol\">Symbol</Label>\r\n            <Input autoComplete=\"off\" bsSize=\"sm\" id=\"symbol\" name=\"symbol\" required />\r\n          </FormGroup>\r\n          {showTransactionData ? (\r\n            <FormGroup>\r\n              <Button\r\n                color=\"link\"\r\n                onClick={() => {\r\n                  setShowTransactionData(false);\r\n                }}\r\n                size=\"sm\"\r\n                type=\"button\"\r\n              >\r\n                - Remove transaction data\r\n              </Button>\r\n            </FormGroup>\r\n          ) : (\r\n            <FormGroup>\r\n              <Button\r\n                color=\"link\"\r\n                onClick={() => {\r\n                  setShowTransactionData(true);\r\n                }}\r\n                size=\"sm\"\r\n                type=\"button\"\r\n              >\r\n                + Add transaction data\r\n              </Button>\r\n            </FormGroup>\r\n          )}\r\n          <Collapse isOpen={showTransactionData}>\r\n            <FormGroup>\r\n              <Label for=\"type\">Type</Label>\r\n              <Input\r\n                bsSize=\"sm\"\r\n                className=\"form-control\"\r\n                disabled={!showTransactionData}\r\n                id=\"type\"\r\n                name=\"type\"\r\n                required\r\n                type=\"select\"\r\n              >\r\n                <option>Buy</option>\r\n                <option>Sell</option>\r\n              </Input>\r\n            </FormGroup>\r\n            <FormGroup>\r\n              <Label for=\"shares\">Shares</Label>\r\n              <Input\r\n                bsSize=\"sm\"\r\n                disabled={!showTransactionData}\r\n                id=\"shares\"\r\n                min=\"0\"\r\n                name=\"shares\"\r\n                required\r\n                step=\".001\"\r\n                type=\"number\"\r\n              />\r\n            </FormGroup>\r\n            <FormGroup>\r\n              <Label for=\"price\">Price/Amount</Label>\r\n              <Input\r\n                bsSize=\"sm\"\r\n                disabled={!showTransactionData}\r\n                id=\"price\"\r\n                min=\"0\"\r\n                name=\"price\"\r\n                step=\".01\"\r\n                type=\"number\"\r\n              />\r\n            </FormGroup>\r\n            <FormGroup>\r\n              <Label for=\"date\">\r\n                Date <small className=\"text-secondary\">(Optional)</small>\r\n              </Label>\r\n              <Input\r\n                bsSize=\"sm\"\r\n                disabled={!showTransactionData}\r\n                id=\"date\"\r\n                name=\"date\"\r\n                type=\"date\"\r\n              />\r\n            </FormGroup>\r\n            <FormGroup>\r\n              <Label for=\"commission\">\r\n                Commission <small className=\"text-secondary\">(Optional)</small>\r\n              </Label>\r\n              <Input\r\n                bsSize=\"sm\"\r\n                disabled={!showTransactionData}\r\n                id=\"commission\"\r\n                min=\"0\"\r\n                name=\"commission\"\r\n                step=\".01\"\r\n                type=\"number\"\r\n              />\r\n            </FormGroup>\r\n          </Collapse>\r\n          <FormGroup style={{ marginBottom: 0 }}>\r\n            <Button color=\"primary\" disabled={props.isLoading} size=\"sm\" type=\"submit\">\r\n              Add to portfolio\r\n            </Button>\r\n          </FormGroup>\r\n        </Form>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","/* @flow */\r\n\r\nimport * as React from \"react\";\r\nimport { Button, Col, Input, Label } from \"reactstrap\";\r\n\r\ntype Props = {\r\n  onDeletePortfolio: () => void,\r\n  onDownloadPortfolio: () => void,\r\n  onImportPortfolio: (file: Blob) => void,\r\n};\r\n\r\nexport default function PortfolioActions(props: Props): React.Node {\r\n  const handleImportTransactions = (event: SyntheticEvent<HTMLInputElement>) => {\r\n    const currentTarget = event.currentTarget;\r\n    const files = currentTarget.files;\r\n    if (files == null || files.length === 0) return;\r\n    props.onImportPortfolio(files[0]);\r\n\r\n    // Reset the input so the same file can be uploaded multiple times in a row (without\r\n    // resetting the `onchange` would not fire). Why upload multiple times? Testing testing\r\n    // testing. ABT: Always Be Testing.\r\n    currentTarget.value = \"\";\r\n  };\r\n\r\n  return (\r\n    <Col className=\"text-right\">\r\n      <Button color=\"link\" size=\"sm\" type=\"button\">\r\n        <Label className=\"label-button\">\r\n          <Input accept=\"text/csv\" hidden onChange={handleImportTransactions} type=\"file\" />\r\n          Import transactions\r\n        </Label>\r\n      </Button>\r\n      |\r\n      <Button color=\"link\" onClick={props.onDeletePortfolio} size=\"sm\" type=\"button\">\r\n        Delete portfolio\r\n      </Button>\r\n      |\r\n      <Button color=\"link\" onClick={props.onDownloadPortfolio} size=\"sm\" type=\"button\">\r\n        Download to spreadsheet\r\n      </Button>\r\n    </Col>\r\n  );\r\n}\r\n","/* @flow */\r\n\r\nimport \"./PortfolioNav.css\";\r\nimport * as React from \"react\";\r\nimport { Nav, NavItem } from \"reactstrap\";\r\nimport { NavLink } from \"react-router-dom\";\r\n\r\nexport default function PortfolioNav(): React.Node {\r\n  return (\r\n    <div className=\"bg-light shadow-sm nav-scroller\">\r\n      <Nav className=\"nav-portfolio\" role=\"navigation\">\r\n        <NavItem>\r\n          <NavLink className=\"nav-link\" exact to=\"/\">\r\n            Overview\r\n          </NavLink>\r\n        </NavItem>\r\n        <NavItem>\r\n          <NavLink className=\"nav-link\" to=\"/performance\">\r\n            Performance\r\n          </NavLink>\r\n        </NavItem>\r\n        <NavItem>\r\n          <NavLink className=\"nav-link\" to=\"/transactions\">\r\n            Transactions\r\n          </NavLink>\r\n        </NavItem>\r\n      </Nav>\r\n    </div>\r\n  );\r\n}\r\n","/* @flow */\r\n\r\nimport * as React from \"react\";\r\nimport type { AppState, Dispatch } from \"./types\";\r\nimport { Button, Col, Container, Row } from \"reactstrap\";\r\nimport {\r\n  addTransaction,\r\n  deletePortfolio,\r\n  downloadPortfolio,\r\n  fetchAllQuotes,\r\n  importTransactionsFile,\r\n} from \"./actions\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport AddSymbolForm from \"./AddSymbolForm\";\r\nimport PortfolioActions from \"./PortfolioActions\";\r\nimport PortfolioNav from \"./PortfolioNav\";\r\n\r\ntype Props = {\r\n  children?: React.Node,\r\n  deleteDisabled: boolean,\r\n  onDelete: () => void,\r\n};\r\n\r\nexport default function Portfolio({ children, deleteDisabled, onDelete }: Props): React.Node {\r\n  const dispatch = useDispatch<Dispatch>();\r\n  const isLoading = useSelector<AppState, boolean>(state => state.isFetchingCount > 0);\r\n\r\n  function handleAddSymbol(data: {\r\n    commission: string,\r\n    date: string,\r\n    price: string,\r\n    shares: string,\r\n    symbol: string,\r\n    type: \"Buy\" | \"Sell\",\r\n  }) {\r\n    // Set some defaults and override the symbol to make sure it's always UPPERCASE.\r\n    const transaction = {\r\n      cashValue: null,\r\n      commission: parseFloat(data.commission) || 0,\r\n      date: data.date,\r\n      id: -1, // A real ID is added in the reducer.\r\n      notes: null,\r\n      price: parseFloat(data.price) || 0,\r\n      shares: parseFloat(data.shares) || 0,\r\n      symbol: data.symbol.toUpperCase(),\r\n      type: data.type || \"Buy\", // Match the behavior of Google Finance; 0 value is a 'Buy'.\r\n    };\r\n\r\n    dispatch(addTransaction(transaction));\r\n    dispatch(fetchAllQuotes());\r\n  };\r\n\r\n  function handleDeletePortfolio() {\r\n    if (\r\n      window.confirm(\"Are you sure you want to delete the entire portfolio? This is irreversible.\")\r\n    ) {\r\n      dispatch(deletePortfolio());\r\n    }\r\n  };\r\n\r\n  function handleDownloadPortfolio() {\r\n    dispatch(downloadPortfolio());\r\n  };\r\n\r\n  function handleImportPortfolio(file: Blob) {\r\n    dispatch(importTransactionsFile(file));\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <PortfolioNav />\r\n      <Container fluid>\r\n        <Row className=\"mb-3 mt-3\">\r\n          <Col>\r\n            <Button\r\n              color={deleteDisabled ? \"secondary\" : \"danger\"}\r\n              disabled={deleteDisabled}\r\n              onClick={onDelete}\r\n              outline\r\n              size=\"sm\"\r\n            >\r\n              Delete\r\n            </Button>\r\n          </Col>\r\n          <PortfolioActions\r\n            onDeletePortfolio={handleDeletePortfolio}\r\n            onDownloadPortfolio={handleDownloadPortfolio}\r\n            onImportPortfolio={handleImportPortfolio}\r\n          />\r\n        </Row>\r\n        {children}\r\n      </Container>\r\n      <Container className=\"mb-4\">\r\n        <Row>\r\n          <Col md=\"6\">\r\n            <AddSymbolForm isLoading={isLoading} onAddSymbol={handleAddSymbol} />\r\n          </Col>\r\n        </Row>\r\n      </Container>\r\n    </>\r\n  );\r\n}\r\n","/* @flow */\r\n\r\nimport * as React from \"react\";\r\nimport { Button, Col, Row } from \"reactstrap\";\r\nimport type { AppSettings, AppState, Dispatch, Quote, Transaction } from \"./types\";\r\nimport { abbreviatedNumberFormatter, currencyFormatter, percentFormatter } from \"./formatters\";\r\nimport { changePageSize, deleteSymbols } from \"./actions\";\r\nimport { Link } from \"react-router-dom\";\r\nimport PortfolioContainer from \"./PortfolioContainer\";\r\nimport ReactTable from \"react-table\";\r\nimport { connect } from \"react-redux\";\r\nimport cx from \"classnames\";\r\nimport selectTableHOC from \"react-table/lib/hoc/selectTable\";\r\n\r\ntype StateProps = {\r\n  appSettings: AppSettings,\r\n  quotes: { [symbol: string]: Quote },\r\n  symbols: Array<string>,\r\n  transactions: Array<Transaction>,\r\n};\r\n\r\ntype Props = StateProps & { dispatch: Dispatch };\r\n\r\ntype State = {\r\n  selectedSymbols: Set<string>,\r\n};\r\n\r\nconst SelectReactTable = selectTableHOC(ReactTable);\r\n\r\nfunction classes(cell) {\r\n  return cx(\"text-right\", {\r\n    \"text-danger\": cell != null && cell < 0,\r\n    \"text-success\": cell != null && cell >= 0,\r\n  });\r\n}\r\n\r\nconst TABLE_COLUMNS = [\r\n  {\r\n    accessor: \"companyName\",\r\n    Cell: (props) => (props.value == null ? \"...\" : props.value),\r\n    Footer: <strong>Portfolio value:</strong>,\r\n    Header: \"Name\",\r\n    headerClassName: \"text-left\",\r\n  },\r\n  {\r\n    accessor: \"symbol\",\r\n    Cell: (props) => <Link to={`/stocks/${props.value}`}>{props.value}</Link>,\r\n    Header: \"Symbol\",\r\n    headerClassName: \"text-left\",\r\n  },\r\n  {\r\n    accessor: \"latestPrice\",\r\n    Cell: (props) => (\r\n      <div className=\"text-right\">\r\n        {props.value == null ? \"...\" : currencyFormatter.format(props.value)}\r\n      </div>\r\n    ),\r\n    Header: \"Last Price\",\r\n    headerClassName: \"text-right\",\r\n  },\r\n  {\r\n    accessor: \"change.change\",\r\n    Cell: (props) => {\r\n      const cell = props.original.change;\r\n      return (\r\n        <div className={classes(props.value)}>\r\n          {cell.change == null\r\n            ? \"...\"\r\n            : `${cell.change >= 0 ? \"+\" : \"\"}${currencyFormatter.format(cell.change)} (${\r\n                cell.changePercent >= 0 ? \"+\" : \"\"\r\n              }${percentFormatter.format(cell.changePercent)})`}\r\n        </div>\r\n      );\r\n    },\r\n    Header: \"Change\",\r\n    headerClassName: \"text-right\",\r\n  },\r\n  {\r\n    accessor: \"marketCap\",\r\n    Cell: (props) => (\r\n      <div className=\"text-right\">\r\n        {props.value == null ? \"...\" : abbreviatedNumberFormatter.format(props.value)}\r\n      </div>\r\n    ),\r\n    Header: \"Mkt. Cap\",\r\n    headerClassName: \"text-right\",\r\n  },\r\n  {\r\n    accessor: \"latestVolume\",\r\n    Cell: (props) => (\r\n      <div className=\"text-right\">\r\n        {props.value == null ? \"...\" : abbreviatedNumberFormatter.format(props.value)}\r\n      </div>\r\n    ),\r\n    Header: \"Volume\",\r\n    headerClassName: \"text-right\",\r\n  },\r\n  {\r\n    accessor: \"open\",\r\n    Cell: (props) => (\r\n      <div className=\"text-right\">\r\n        {props.value == null ? \"...\" : currencyFormatter.format(props.value)}\r\n      </div>\r\n    ),\r\n    Header: \"Open\",\r\n    headerClassName: \"text-right\",\r\n  },\r\n  {\r\n    accessor: \"high\",\r\n    Cell: (props) => (\r\n      <div className=\"text-right\">\r\n        {props.value == null ? \"...\" : currencyFormatter.format(props.value)}\r\n      </div>\r\n    ),\r\n    Header: \"High\",\r\n    headerClassName: \"text-right\",\r\n  },\r\n  {\r\n    accessor: \"low\",\r\n    Cell: (props) => (\r\n      <div className=\"text-right\">\r\n        {props.value == null ? \"...\" : currencyFormatter.format(props.value)}\r\n      </div>\r\n    ),\r\n    Header: \"Low\",\r\n    headerClassName: \"text-right\",\r\n  },\r\n  {\r\n    accessor: \"daysGain\",\r\n    Cell: (props) => (\r\n      <div className={classes(props.value)}>\r\n        {props.value == null\r\n          ? \"...\"\r\n          : `${props.value >= 0 ? \"+\" : \"\"}${currencyFormatter.format(props.value)}`}\r\n      </div>\r\n    ),\r\n    Footer: (props) => {\r\n      const totalDaysGain = props.data.reduce((total, current) => total + current.daysGain, 0);\r\n      return (\r\n        <div className={classes(totalDaysGain)}>\r\n          {totalDaysGain >= 0 ? \"+\" : \"\"}\r\n          {currencyFormatter.format(totalDaysGain)}\r\n        </div>\r\n      );\r\n    },\r\n    Header: \"Day's gain\",\r\n    headerClassName: \"text-right\",\r\n  },\r\n];\r\n\r\nclass Overview extends React.Component<Props, State> {\r\n  static getDerivedStateFromProps(nextProps: Props, prevState: State) {\r\n    // If any currently selected symbols are not in the next props update, remove them from the\r\n    // internal selected symbols `Set` to stay up-to-date.\r\n    let hasChanges = false;\r\n    const nextSymbols = new Set(nextProps.symbols);\r\n    const nextSelectedSymbols = new Set<string>();\r\n    for (const symbol of prevState.selectedSymbols) {\r\n      if (nextSymbols.has(symbol)) nextSelectedSymbols.add(symbol);\r\n      else hasChanges = true;\r\n    }\r\n\r\n    if (hasChanges) return { selectedSymbols: nextSelectedSymbols };\r\n    else return null;\r\n  }\r\n\r\n  constructor(props: Props) {\r\n    super(props);\r\n    this.state = {\r\n      // This is *not* treated as immutable. Object identity will not always correctly indicate\r\n      // when changes are made.\r\n      selectedSymbols: new Set(),\r\n    };\r\n  }\r\n\r\n  handleDeleteSelectedSymbols = () => {\r\n    this.props.dispatch(deleteSymbols(Array.from(this.state.selectedSymbols)));\r\n  };\r\n\r\n  handlePageSizeChange = (nextPageSize: number) => {\r\n    this.props.dispatch(changePageSize(nextPageSize));\r\n  };\r\n\r\n  handleToggleAllSymbols = (isSelected: boolean) => {\r\n    if (this.isAllSymbolsSelected()) {\r\n      this.setState({ selectedSymbols: new Set() });\r\n    } else {\r\n      this.setState({\r\n        selectedSymbols: new Set(this.props.symbols),\r\n      });\r\n    }\r\n  };\r\n\r\n  handleToggleSymbolSelected = (symbol: string) => {\r\n    const normalizedSymbol = symbol.replace(/^select-/, \"\");\r\n    if (this.isSymbolSelected(normalizedSymbol)) {\r\n      this.state.selectedSymbols.delete(normalizedSymbol);\r\n    } else {\r\n      this.state.selectedSymbols.add(normalizedSymbol);\r\n    }\r\n    this.forceUpdate();\r\n  };\r\n\r\n  isAllSymbolsSelected = () => {\r\n    return this.state.selectedSymbols.size === this.props.symbols.length;\r\n  };\r\n\r\n  isSymbolSelected = (symbol: string) => {\r\n    return this.state.selectedSymbols.has(symbol);\r\n  };\r\n\r\n  render() {\r\n    const tableData = this.props.symbols.map((symbol) => {\r\n      const quote = this.props.quotes[symbol];\r\n      const transactions = this.props.transactions.filter(\r\n        (transaction) => transaction.symbol === symbol\r\n      );\r\n      const totalShares = transactions.reduce((prev, curr) => prev + curr.shares, 0);\r\n\r\n      return {\r\n        change: {\r\n          change: quote == null ? null : quote.change,\r\n          changePercent: quote == null ? null : quote.changePercent,\r\n        },\r\n        companyName: quote == null ? null : quote.companyName,\r\n        daysGain: quote == null || totalShares === 0 ? null : quote.change * totalShares,\r\n        high: quote == null ? null : quote.high,\r\n        latestPrice: quote == null ? null : quote.latestPrice,\r\n        latestVolume: quote == null ? null : quote.latestVolume,\r\n        low: quote == null ? null : quote.low,\r\n        marketCap: quote == null ? null : quote.marketCap,\r\n        open: quote == null ? null : quote.open,\r\n        symbol,\r\n      };\r\n    });\r\n\r\n    const deleteDisabled = this.props.symbols.length === 0 || this.state.selectedSymbols.size === 0;\r\n    return (\r\n      <PortfolioContainer\r\n        deleteDisabled={deleteDisabled}\r\n        onDelete={this.handleDeleteSelectedSymbols}\r\n      >\r\n        <Row className=\"mb-4\">\r\n          <Col>\r\n            <SelectReactTable\r\n              columns={TABLE_COLUMNS}\r\n              data={tableData}\r\n              defaultSorted={[{ desc: false, id: \"symbol\" }]}\r\n              getPaginationProps={() => ({\r\n                className: \"pt-2\",\r\n                NextComponent: (props) => <Button className=\"btn-sm\" outline {...props} />,\r\n                PreviousComponent: (props) => <Button className=\"btn-sm\" outline {...props} />,\r\n                showPageJump: false,\r\n              })}\r\n              isSelected={this.isSymbolSelected}\r\n              keyField=\"symbol\"\r\n              noDataText=\"No symbols yet. Add one using the form below.\"\r\n              onPageSizeChange={this.handlePageSizeChange}\r\n              pageSize={this.props.appSettings.pageSize}\r\n              selectAll={this.isAllSymbolsSelected()}\r\n              selectType=\"checkbox\"\r\n              toggleAll={this.handleToggleAllSymbols}\r\n              toggleSelection={this.handleToggleSymbolSelected}\r\n            />\r\n          </Col>\r\n        </Row>\r\n      </PortfolioContainer>\r\n    );\r\n  }\r\n}\r\n\r\nexport default (connect<Props, {}, _, _, _, _>((state: AppState) => ({\r\n  appSettings: state.appSettings,\r\n  quotes: state.quotes,\r\n  symbols: state.symbols,\r\n  transactions: state.transactions,\r\n}))(Overview): React.ComponentType<*>);\r\n"],"sourceRoot":""}